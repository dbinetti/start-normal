{% extends 'app/base.html' %}

{% load bootstrap4 %}
{% load humanize %}

{% block title %}Homeroom{% endblock title %}
{% block header %}Homeroom{% endblock header %}

{% block content %}
  <section class='my-5'>
    <p class='lead mb-5 col-lg-9'>
      This Homeroom is a stable cohort of {{homeroom.classmates.count}} students from the following schools and grades: {{homeroom.schools|join:", "}}; {{homeroom.grades|join:", "}}.
    </p>
  </section>
  <section>
    <h4>
      Current Status:  {{homeroom.get_status_display}}<br>
      Homeroom Owner:  {{homeroom.parent.user.name}}
    </h4>
  </section>
    {% if request.user.is_authenticated %}
      <section class='mt-2 mt-5'>
        <div class='card'>
          <div class='card-header'>
            <h4>Current Students</h4>
            <small class='text-muted'>
              Note: this information is only available to registered users and is not publicly available.
            </small>
          </div>
          <div class='card-body'>
            <div class='table-responsive-lg mb-5'>
              <table class='table table-sm'>
                <thead>
                  <tr>
                    <th>
                      Student Name
                    </th>
                    <th>
                      Parent Name
                    </th>
                    <th>
                      Parent Email
                    </th>
                  </tr>
                </thead>
                <tbody>
                  {% for classmate in classmates %}
                    <tr>
                      <td>
                        {{classmate.student.name|default:"(Unknown)"}}
                      </td>
                      <td>
                        {{classmate.student.parent}}
                      </td>
                      <td>
                        <a href='mailto:{{classmate.student.parent.user.email}}'>{{classmate.student.parent.user.email}}</a>
                      </td>
                    </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </div>
          <div class='card-footer'>
            To add or remove a student from this Homeroom, please send an email to <a href='mailto:dbinetti@startnormal.com'>dbinetti@startnormal.com</a> or call/text 415.713.2126
          </div>
        </div>
      </section>
      {% else %}
      <p>
        To see the student names and request to join this homeroom, please register:
      </p>
      <section class='mt-3'>
        <div class='row'>
          <div class='col-lg-6 my-2'>
            <a href='{% url "signup" "parent" %}' role='button' class="btn btn-success btn-block btn-lg">
              Parent Signup
            </a>
          </div>
        </div>
      </section>
    {% endif %}

{% endblock content %}
