{% extends 'app/base.html' %}

{% load bootstrap4 %}
{% load humanize %}

{% block title %}Homeroom{% endblock title %}
{% block header %}Homeroom{% endblock header %}

{% block content %}
  <section class='my-5'>
    <p class='lead mb-5 col-lg-9'>
      This Homeroom is a stable cohort of {{homeroom.get_grade_display}} students from {{homeroom.school.name}}, in {{homeroom.school.city}}, {{homeroom.school.state}}.
    </p>
    {% if request.user.is_authenticated %}
      <p>
        To add your student to this Homeroom, please visit your <a href='{% url "dashboard" %}'>Dashboard</a>.
      </p>
    {% else %}
        <p>
        This Homeroom currently has {{homeroom.students.count}} registered students.  If you have a child in {{homeroom.get_grade_display}} from {{homeroom.school.name}} in {{homeroom.school.city}}.
        </p>
        <p>
         <a href='{% url "signup" homeroom.id %}' role='button' class='btn btn-success btn-lg'>Join This Homeroom</a>.
        </p>
    {% endif %}
    <p>
      Once the Homeroom reaches five students, we'll find a teacher to provide instruction to this group and arrange the final details of how and when instruction will begin.
    </p>
    <p>
      I'm building out functionality on an hourly basis, so please don't hestitate to reach out with questions, concerns, ideas or any other needs and I'll do my best to help as best I can.  Call/text my cell at 415.713.2126 or email me at <a href='mailto:dbinetti@startnormal.com'>dbinetti@startnormal.com</a>.
  </section>

  {% if request.user.is_authenticated %}
    <section class='mt-2 mt-5'>
      <div class='card'>
        <div class='card-header'>
          <h4>Current Students</h4>
          <small class='text-muted'>
            Note: this information is only available to registered users and is not publicly available.
          </small>
        </div>
        <div class='card-body'>
          <div class='table-responsive-lg mb-5'>
            <table class='table table-sm'>
              <thead>
                <tr>
                  <th>
                    Student Name
                  </th>
                  <th>
                    Parent Name
                  </th>
                  <th>
                    Parent Email
                  </th>
                </tr>
              </thead>
              <tbody>
                {% for student in students %}
                  <tr>
                    <td>
                      {{student.name|default:"(Unknown)"}}
                    </td>
                    <td>
                      {{student.parent}}
                    </td>
                    <td>
                      <a href='mailto:{{student.parent.user.email}}'>{{student.parent.user.email}}</a>
                    </td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </section>
  {% endif %}
{% endblock content %}
